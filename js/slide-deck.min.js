function SlideDeck(e){this.curSlide_=0;this.prevSlide_=0;this.config_=null;this.container=e||document.querySelector("slides");this.slides=[];this.getCurrentSlideFromHash_();this.onDomLoaded_.bind(this)()}document.cancelFullScreen=document.webkitCancelFullScreen||document.mozCancelFullScreen;SlideDeck.prototype.SLIDE_CLASSES_=["far-past","past","current","next","far-next"];SlideDeck.prototype.CSS_DIR_="theme/css/";SlideDeck.prototype.getCurrentSlideFromHash_=function(){var e=parseInt(document.location.hash.substr(1));if(e){this.curSlide_=e-1}else{this.curSlide_=0}};SlideDeck.prototype.loadSlide=function(e){if(e){this.curSlide_=e-1;this.updateSlides_()}};SlideDeck.prototype.onDomLoaded_=function(e){document.body.classList.add("loaded");this.slides=this.container.querySelectorAll("slide:not([hidden]):not(.backdrop)");if(Modernizr.mq("only screen and (max-device-width: 480px)")){this.container.classList.remove("layout-widescreen")}this.loadConfig_(SLIDE_CONFIG);this.addEventListeners_();this.updateSlides_();var t=this;for(var n=0,r;r=this.slides[n];++n){r.dataset.slideNum=n+1;r.dataset.totalSlides=this.slides.length;r.addEventListener("click",function(e){if(document.body.classList.contains("overview")){t.loadSlide(this.dataset.slideNum);e.preventDefault();window.setTimeout(function(){t.toggleOverview()},500)}},false)}};SlideDeck.prototype.addEventListeners_=function(){document.addEventListener("keydown",this.onBodyKeyDown_.bind(this),false);window.addEventListener("popstate",this.onPopState_.bind(this),false)};SlideDeck.prototype.onPopState_=function(e){if(e.state!=null){this.curSlide_=e.state;this.updateSlides_(true)}};SlideDeck.prototype.onBodyKeyDown_=function(e){if(/^(input|textarea)$/i.test(e.target.nodeName)||e.target.isContentEditable){return}switch(e.keyCode){case 13:if(document.body.classList.contains("overview")){this.toggleOverview()}break;case 39:case 32:case 34:this.nextSlide();e.preventDefault();break;case 37:case 8:case 33:this.prevSlide();e.preventDefault();break;case 40:this.nextSlide();e.preventDefault();break;case 38:this.prevSlide();e.preventDefault();break;case 72:document.body.classList.toggle("highlight-code");break;case 79:this.toggleOverview();break;case 82:break;case 27:document.body.classList.remove("with-notes");document.body.classList.remove("highlight-code");if(document.body.classList.contains("overview")){this.toggleOverview()}break;case 70:if(e.target==document.body&&!(e.shiftKey&&e.metaKey)){if(document.mozFullScreen!==undefined&&!document.mozFullScreen){document.body.mozRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}else if(document.webkitIsFullScreen!==undefined&&!document.webkitIsFullScreen){document.body.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}else{document.cancelFullScreen()}}break;case 87:if(e.target==document.body&&!(e.shiftKey&&e.metaKey)){this.container.classList.toggle("layout-widescreen")}break}};SlideDeck.prototype.focusOverview_=function(){var e=document.body.classList.contains("overview");for(var t=0,n;n=this.slides[t];t++){n.style[Modernizr.prefixed("transform")]=e?"translateZ(-2500px) translate("+(t-this.curSlide_)*105+"%, 0%)":""}};SlideDeck.prototype.toggleOverview=function(){document.body.classList.toggle("overview");this.focusOverview_()};SlideDeck.prototype.loadConfig_=function(e){if(!e){return}this.config_=e;var t=this.config_.settings;this.loadTheme_(t.theme||[]);if(t.favIcon){this.addFavIcon_(t.favIcon)}if(!!!("usePrettify"in t)||t.usePrettify){prettyPrint()}if(t.analytics){this.loadAnalytics_()}if(t.fonts){this.addFonts_(t.fonts)}if(!!!("useBuilds"in t)||t.useBuilds){this.makeBuildLists_()}if(t.title){document.title=t.title.replace(/<br\/?>/," ");document.querySelector("[data-config-title]").innerHTML=t.title}if(t.subtitle){document.querySelector("[data-config-subtitle]").innerHTML=t.subtitle}if(this.config_.presenters){var n=this.config_.presenters;var r=document.querySelector("[data-config-contact]");var i=[];if(n.length==1){var s=n[0];i=[s.name,s.company].join("<br>");var o=s.gplus?'<span>g+</span><a href="'+s.gplus+'">'+s.gplus.replace(/https?:\/\//,"")+"</a>":"";var u=s.twitter?"<span>twitter</span>"+'<a href="http://twitter.com/'+s.twitter+'">'+s.twitter+"</a>":"";var a=s.www?'<span>www</span><a href="'+s.www+'">'+s.www.replace(/https?:\/\//,"")+"</a>":"";var f=s.github?'<span>github</span><a href="'+s.github+'">'+s.github.replace(/https?:\/\//,"")+"</a>":"";var l=[o,u,a,f].join("<br>");if(r){r.innerHTML=l}}else{for(var c=0,s;s=n[c];++c){i.push(s.name+" - "+s.company)}i=i.join("<br>");if(r){r.innerHTML=i}}var h=document.querySelector("[data-config-presenter]");if(h){document.querySelector("[data-config-presenter]").innerHTML=i}}if(!!!("enableSlideAreas"in t)||t.enableSlideAreas){var p=document.createElement("div");p.classList.add("slide-area");p.id="prev-slide-area";p.addEventListener("click",this.prevSlide.bind(this),false);this.container.appendChild(p);var p=document.createElement("div");p.classList.add("slide-area");p.id="next-slide-area";p.addEventListener("click",this.nextSlide.bind(this),false);this.container.appendChild(p)}if(Modernizr.touch&&(!!!("enableTouch"in t)||t.enableTouch)){var d=this;window.addEventListener("touchstart",function(e){e.preventDefault()},false);var v=new Hammer(this.container);v.ondragend=function(e){if(e.direction=="right"||e.direction=="down"){d.prevSlide()}else if(e.direction=="left"||e.direction=="up"){d.nextSlide()}}}};SlideDeck.prototype.addFonts_=function(e){var t=document.createElement("link");t.rel="stylesheet";t.href=("https:"==document.location.protocol?"https":"http")+"://fonts.googleapis.com/css?family="+e.join("|")+"&v2";document.querySelector("head").appendChild(t)};SlideDeck.prototype.buildNextItem_=function(){var e=this.slides[this.curSlide_];var t=e.querySelector(".to-build");var n=e.querySelector(".build-current");if(n){n.classList.remove("build-current");if(n.classList.contains("fade")){n.classList.add("build-fade")}}if(!t){var r=e.querySelectorAll(".build-fade");for(var i=0,s;s=r[i];i++){s.classList.remove("build-fade")}return false}t.classList.remove("to-build");t.classList.add("build-current");return true};SlideDeck.prototype.prevSlide=function(e){if(this.curSlide_>0){var t=document.body.classList;t.remove("highlight-code");this.prevSlide_=this.curSlide_--;this.updateSlides_(e)}};SlideDeck.prototype.nextSlide=function(e){if(!document.body.classList.contains("overview")&&this.buildNextItem_()){return}if(this.curSlide_<this.slides.length-1){var t=document.body.classList;t.remove("highlight-code");this.prevSlide_=this.curSlide_++;this.updateSlides_(e)}};SlideDeck.prototype.triggerSlideEvent=function(e,t){var n=this.getSlideEl_(t);if(!n){return}var r=n.getAttribute(e);if(r){(new Function(r)).call(n)}var i=document.createEvent("Event");i.initEvent(e,true,true);i.slideNumber=t+1;i.slide=n;n.dispatchEvent(i)};SlideDeck.prototype.updateSlides_=function(e){var t=e||false;var n=this.curSlide_;for(var r=0;r<this.slides.length;++r){switch(r){case n-2:this.updateSlideClass_(r,"far-past");break;case n-1:this.updateSlideClass_(r,"past");break;case n:this.updateSlideClass_(r,"current");break;case n+1:this.updateSlideClass_(r,"next");break;case n+2:this.updateSlideClass_(r,"far-next");break;default:this.updateSlideClass_(r);break}}this.triggerSlideEvent("slideleave",this.prevSlide_);this.triggerSlideEvent("slideenter",n);this.enableSlideFrames_(n+1);window.setTimeout(this.enableSlideFrames_.bind(this,n+2),1e3);this.updateHash_(t);if(document.body.classList.contains("overview")){this.focusOverview_();return}};SlideDeck.prototype.enableSlideFrames_=function(e){var t=this.slides[e-1];if(!t){return}var n=t.querySelectorAll("iframe");for(var r=0,i;i=n[r];r++){this.enableFrame_(i)}};SlideDeck.prototype.enableFrame_=function(e){var t=e.dataset.src;if(t&&e.src!=t){e.src=t}};SlideDeck.prototype.disableSlideFrames_=function(e){var t=this.slides[e-1];if(!t){return}var n=t.querySelectorAll("iframe");for(var r=0,i;i=n[r];r++){this.disableFrame_(i)}};SlideDeck.prototype.disableFrame_=function(e){e.src="about:blank"};SlideDeck.prototype.getSlideEl_=function(e){if(e<0||e>=this.slides.length){return null}else{return this.slides[e]}};SlideDeck.prototype.updateSlideClass_=function(e,t){var n=this.getSlideEl_(e);if(!n){return}if(t){n.classList.add(t)}for(var r=0,i;i=this.SLIDE_CLASSES_[r];++r){if(t!=i){n.classList.remove(i)}}};SlideDeck.prototype.makeBuildLists_=function(){for(var e=this.curSlide_,t;t=this.slides[e];++e){var n=t.querySelectorAll(".build > *");for(var r=0,i;i=n[r];++r){if(i.classList){i.classList.add("to-build");if(i.parentNode.classList.contains("fade")){i.classList.add("fade")}}}}};SlideDeck.prototype.updateHash_=function(e){if(!e){var t=this.curSlide_+1;var n="#"+t;if(window.history.pushState){window.history.pushState(this.curSlide_,"Slide "+t,n)}else{window.location.replace(n)}window["_gaq"]&&window["_gaq"].push(["_trackPageview",document.location.href])}};SlideDeck.prototype.addFavIcon_=function(e){var t=document.createElement("link");t.rel="icon";t.type="image/png";t.href=e;document.querySelector("head").appendChild(t)};SlideDeck.prototype.loadTheme_=function(e){var t=[];if(e.constructor.name==="String"){t.push(e)}else{t=e}for(var n=0,r;themeUrl=t[n];n++){var r=document.createElement("link");r.rel="stylesheet";r.type="text/css";if(themeUrl.indexOf("http")==-1){r.href=this.CSS_DIR_+themeUrl+".css"}else{r.href=themeUrl}document.querySelector("head").appendChild(r)}};SlideDeck.prototype.loadAnalytics_=function(){var e=window["_gaq"]||[];e.push(["_setAccount",this.config_.settings.analytics]);e.push(["_trackPageview"]);(function(){var e=document.createElement("script");e.type="text/javascript";e.async=true;e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})()};(function(){Modernizr.load({test:!!document.body.classList&&!!document.body.dataset,nope:["js/polyfills/classList.min.js","js/polyfills/dataset.min.js"],complete:function(){window.slidedeck=new SlideDeck}})})()